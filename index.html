<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="stylesheet" type="text/css" href="todostyle.css">
        <script type="text/javascript" src="jquery.min.js"></script>
        <script type="text/javascript" src="mystore.js"></script>
        
        <script id="profile-template" type="text/x-handlebars-template">
                <div>{{about.name}}: {{about.description}}</div>
        </script>
        <script id="people-template" type="text/x-handlebars-template">
                People:
                <div id="people">
                        {{#each objects}}{{> profile }}{{/each}}
                </div>
        </script>
        
        <script id="todo-template" type="text/x-handlebars-template">
            <div className="todo">
                <h4>{{label}}</h4>
                {{assignee}}
            </div>
        </script>
        <script id="todolist-template" type="text/x-handlebars-template">
            <h2>Todo List!</h2>
            {{#each objects}}{{> todo }}{{/each}}
            <form className="todoForm" onSubmit="console.log(e)">
                <h4>Add a new task</h4>
                <input type="text" placeholder="The task assignee" name="assignee" />
                <input type="text" placeholder="What do you need to do today?" name="label" />
                <input type="submit" value="Post" />
            </form>
        </script>
        
        <script>
            var reduceForm = function reduceForm(form) {
                return $(form).serializeArray().reduce(function(obj, field){
                    obj[field.name] = field.value; return obj
                }, {});
            };
            addTodo = function addTodo(e) {
                console.log(e);
                return false;
                todo = reduceForm(form);
                store2.save(todo);
                return false;
            };
            $(function(){
                window.store = new MyStore({
                    container: "https://ldp.openinitiative.com:8443/2013/people/",
                    context: "http://ld.hackers4peace.net/contexts/plp.jsonld",
                    template: $("#people-template").html(),
                    partials: {'profile': $("#profile-template").html()},
                });
                store.render("#profilebrowser");
            });
            $(function(){
                window.store2 = new MyStore({
                    container: "https://ldp.openinitiative.com:8443/2013/todos/",
                    context: "http://owl.openinitiative.com/oitodo.jsonld",
                    template: $("#todolist-template").html(),
                    partials: {'todo': $("#todo-template").html()},
                });
                store2.render("#todolist");
            });
        </script>
    </head>
        <body>
        <div id="todolistcontainer">
            <div id="todolist">
            </div>
        </div>
    
        <div id="profilebrowsercontainer">
            <div id="profilebrowser">
            </div>
        </div>
    </body>
</html>
